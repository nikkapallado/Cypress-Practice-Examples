"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.makeAbort = void 0;
const driver_1 = require("@applitools/driver");
function makeAbort({ eyes, target, spec, logger: defaultLogger, }) {
    return async function ({ settings, logger = defaultLogger, } = {}) {
        const driver = (0, driver_1.isDriver)(target, spec) ? await (0, driver_1.makeDriver)({ spec, driver: target, logger }) : null;
        const testMetadata = await (driver === null || driver === void 0 ? void 0 : driver.getSessionMetadata());
        const [baseEyes] = await eyes.getBaseEyes();
        return await baseEyes.abort({ settings: { ...settings, testMetadata }, logger });
    };
}
exports.makeAbort = makeAbort;
